generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "sqlite"
}

enum TableStatus {
  FREE
  RESERVED
}

model Table {
  id         String      @id @default(nanoid())
  status     TableStatus @default(FREE)
  reservedBy String?
  orders     Order[]
}

enum OrderStatus {
  IDLE
  ORDER_RECEIVED
  ORDER_PREPARING
  ORDER_ON_THEY_WAY_TO_TABLE
  ORDER_SERVED
}

model Order {
  id        String      @id @default(nanoid())
  name      String
  itemId    String
  status    OrderStatus @default(ORDER_RECEIVED)
  createdAt DateTime    @default(now())

  tableId String @unique
  table Table    @relation(fields: [tableId], references: [id])
  item  MenuItem @relation(fields: [itemId], references: [id])
}

model MenuItem {
  id          String  @id @default(nanoid())
  name        String
  description String
  price       Float
  image       String?
  orders      Order[]
}